My notes on alert for SwiftUI<!--more--> 

- You can store and build custom Alerts with .alert(isPresented: $isShowingUser) { Alert() }
- Buttons are created with Alert.Button and has many presets 
- You add callback to the buttons 

# Index:
- [Basics](#basics)
- [Simple confirm alert](#simple-confirm-alert)
- [Simple alert with title and message](#simple-alert-with-title-and-message)
- [Simple cancel alert](#simple-cancel-alert)
- [Alternative constructor](#alternative-constructor)
- [Destructive alert](#destructive-alert)
- [Error alert (advanced)](#error-alert-advanced)
- [Multiple alerts](#multiple-alerts)
- [App wide alert controller](#app-wide-alert-controller)
- [TextField and SecureTextField in an alert](#textfield-and-securetextfield-in-an-alert)
- [Additional Alert Resources](#additional-alert-resources)

### Basics:

```swift
struct ContentView: View {
    @State private var presentAlert = false
    var body: some View {
        VStack {
            Text(presentAlert ? "Presenting": "Dismissed")
            Button("Alert") {
                presentAlert = true
            }
            Spacer()
        }
        .padding()
        .alert("Title", isPresented: $presentAlert, actions: {}) // 4
    }
}
```
### Simple confirm alert
```swift
.alert("Welcome", isPresented: $isShowingUser) {
    Button("OK") { }
}

// Automatically makes OK btn for us

.alert("Welcome", isPresented: $isShowingUser) { }
```

### Simple alert with title and msg: 
```swift
.alert("Title", isPresented: $presentAlert, actions: {
    // actions
}, message: {
    Text("Message")
})
```

### Simple cancel alert:
```swift

// iOS 15
.alert("Title", isPresented: $presentAlert, actions: { // 2

 
    Button("Cancel", role: .cancel, action: {})

}, message: {
 
    Text("Message")

})
```

### Alternative constructor:
```swift
.alert(isPresented: $presentAlert) { // 2
    let okBtn = Alert.Button.destructive(Text("Clear all data")) {
    prefrencesSheetHandler.isShowingSheet = false // deactivate the alert
    }
    let cancelBtn = Alert.Button.cancel( Text("Cancel")) {
    prefrencesSheetHandler.isShowingSheet = false // deactivate the alert
    }
    return Alert.init(title: Text("Confirmation needed"),
                    message: Text("Are you sure you want to remove this device?"),
                    primaryButton: okBtn, secondaryButton: cancelBtn)
}
```

### Destructive alert: 
```swift
.alert("Title", isPresented: $presentAlert, actions: {
    Button("Destructive", role: .destructive, action: {})
}, message: {
    Text("Message")
})
``` 

### Error alert: (advance)

```swift
struct ErrorInfo: LocalizedError {
    var errorDescription: String?
    var failureReason: String?
    var recoverySuggestion: String?
    var helpAnchor: String?
}

struct ContentView3: View {
    @State private var presentAlert = false
    @State private var error: ErrorInfo?

    var body: some View {
        VStack {
            Text(presentAlert ? "Presenting": "Dismissed")
            Text(error?.errorDescription ?? "nil")
            Button("Alert") {
                error = ErrorInfo(
                    errorDescription: "Error Description",
                    failureReason: "Failure Reason",
                    recoverySuggestion: "Try Again",
                    helpAnchor: "Help Anchor"
                )
                presentAlert = true
            }
            Spacer()
        }
        .padding()
        .alert(
            isPresented: $presentAlert,
            error: error, // 1
            actions: { error in // 2
                if let suggestion = error.recoverySuggestion {
                    Button(suggestion, action: {
                        // Recover from an error
                    })
                }
            }, message: { error in // 3
            if let failureReason = error.failureReason {
                Text(failureReason)
            } else {
                Text("Something went wrong")
            }
        })
    }
}
```

### Multiple alerts:
```swift
// 1
struct AlertInfo: Identifiable {

    enum AlertType {
        case one
        case two
    }

    let id: AlertType
    let title: String
    let message: String
}

struct ContentView6: View {
    @State private var info: AlertInfo?

    var body: some View {
        VStack {
            Button("Alert 1") {
             
                info = AlertInfo(

                    id: .one,
                    title: "Title 1",
                    message: "Message 1")
            }
            Button("Alert 2") {
     
                info = AlertInfo(

                    id: .two,
                    title: "Title 2",
                    message: "Message 2")
            }
        }
        .alert(item: $info, content: { info in // 5

            Alert(title: Text(info.title),
                  message: Text(info.message))
        })
    }
}
```

### App wide alert controller
Ref: https://sarunw.com/posts/how-to-show-multiple-alerts-on-the-same-view-in-swiftui/
```swift
class AlertController: ObservableObject {
 
    @Published var info: AlertInfo?

}
@main
struct SampleApp: App {
 
    @StateObject private var alertController = AlertController()
    var body: some Scene {
        WindowGroup {
            ContentView()
                .environmentObject(alertController) 

                .alert(item: $alertController.info, content: { info in  

                    Alert(title: Text(info.title),
                          message: Text(info.message))
                })
        }
    }
}
struct ContentView: View {
 
    @EnvironmentObject var alertController: AlertController
    var body: some View {
        VStack {
            Button("Alert 1") {
          
                alertController.info = AlertInfo(

                    id: .one,
                    title: "Title 1",
                    message: "Message 1")
            }
            Button("Alert 2") {
                alertController.info = AlertInfo(
                    id: .two,
                    title: "Title 2",
                    message: "Message 2")
            }
            NestedContentView()
        }
    }
}
struct NestedContentView: View {
    @EnvironmentObject var alertController: AlertController
    var body: some View {
        VStack {
            Button("Nested Alert") {
                alertController.info = AlertInfo(

                    id: .one,
                    title: "Nested Title",
                    message: "Nested Message")
            }
        }
    }
}
```

### TextField and SecureTextField in an alert:
ref: https://sarunw.com/posts/swiftui-alert-textfield/
```swift
struct ContentView: View {
    @State private var presentAlert = false
    @State private var username: String = ""
    @State private var password: String = ""
    
    var body: some View {
        Button("Show Alert") {
            presentAlert = true            
        }
        .alert("Login", isPresented: $presentAlert, actions: {
            TextField("Username", text: $username)

            SecureField("Password", text: $password)

            
            Button("Login", action: {})
            Button("Cancel", role: .cancel, action: {})
        }, message: {
            Text("Please enter your username and password.")
        })
    }
}
```

### Alert:
- Seems like alert also has a way to pass data into it: https://www.hackingwithswift.com/books/ios-swiftui/using-alert-and-sheet-with-optionals
- More alert options here: https://www.kodeco.com/books/swiftui-by-tutorials/v3.0/chapters/16-sheets-alert-views
- https://sarunw.com/posts/swiftui-dismiss-sheet/